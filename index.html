ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’é–‹ãã¾ã—ãŸã€‚æ—¢èª­ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ 1 ä»¶ã§ã™ã€‚

ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¸
Gmail ã§ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ ãƒªãƒ¼ãƒ€ãƒ¼ã®ä½¿ç”¨
1 / 4,661
gptä»•æ§˜
å—ä¿¡ãƒˆãƒ¬ã‚¤

wakutti@yahoo.co.jp
16:56 (2 æ™‚é–“å‰)
To è‡ªåˆ†

<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>DJANGOæ³¨æ–‡ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  ãƒ—ãƒ­ä»•æ§˜ç‰ˆ</title>
<style>
  /* ------------------------------
     ãƒ™ãƒ¼ã‚¹ã‚¹ã‚¿ã‚¤ãƒ«
  ------------------------------ */
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body { font-family:'Noto Sans JP','Hiragino Sans',sans-serif; background:#f8f7f4; color:#1a1a1a; min-height:100vh; }

  .header { background:#1c1917; padding:0 16px; height:52px; display:flex; align-items:center; justify-content:space-between; position:sticky; top:0; z-index:10; }
  .header-title { color:#fff; font-weight:700; font-size:15px; display:flex; align-items:center; gap:8px; }
  .dot { width:8px; height:8px; border-radius:50%; background:#f59e0b; animation:pulse 2s infinite; }
  @keyframes pulse { 0%,100%{opacity:1} 50%{opacity:0.4} }
  .mode-switcher { background:#292524; border-radius:8px; padding:4px; display:flex; gap:4px; }
  .mode-btn { padding:6px 14px; border-radius:6px; border:none; cursor:pointer; font-size:13px; font-weight:600; font-family:inherit; transition:all 0.15s; }
  .mode-btn.active { background:#f59e0b; color:#1c1917; }
  .mode-btn.inactive { background:transparent; color:#a8a29e; }

  .main { max-width:700px; margin:0 auto; padding:16px; }

  /* ------------------------------
     çµ±è¨ˆã‚«ãƒ¼ãƒ‰
  ------------------------------ */
  .stats { display:grid; grid-template-columns:repeat(3,1fr); gap:10px; margin-bottom:16px; }
  .stat-card { background:#fff; border-radius:10px; padding:12px 14px; border:1px solid #e7e5e4; }
  .stat-label { font-size:11px; color:#78716c; margin-bottom:2px; }
  .stat-value { font-size:26px; font-weight:700; }

  /* ------------------------------
     ãƒœã‚¿ãƒ³
  ------------------------------ */
  .btn { padding:10px 18px; border-radius:8px; border:none; font-weight:700; font-size:14px; cursor:pointer; font-family:inherit; transition:all 0.15s; }
  .btn-primary { background:#f59e0b; color:#1c1917; }
  .btn-secondary { background:#fff; color:#1c1917; border:1px solid #d6d3d1; font-weight:600; }
  .btn-dark { background:#1c1917; color:#fff; }
  .btn-danger { background:#fee2e2; color:#dc2626; padding:6px 12px; font-size:12px; font-weight:600; border:none; border-radius:6px; }
  .btn-green { background:#10b981; color:#fff; padding:8px 14px; font-size:13px; font-weight:700; border:none; border-radius:6px; }
  .btn-purple { background:#6366f1; color:#fff; padding:8px 14px; font-size:13px; font-weight:700; border:none; border-radius:6px; }

  .action-bar { display:flex; gap:8px; margin-bottom:14px; flex-wrap:wrap; align-items:center; }
  .sync-status { font-size:12px; color:#10b981; margin-left:auto; display:flex; align-items:center; gap:4px; }
  .sync-dot { width:6px; height:6px; border-radius:50%; background:#10b981; }

  /* ------------------------------
     ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
  ------------------------------ */
  .filters { display:flex; gap:6px; flex-wrap:wrap; margin-bottom:14px; }
  .filter-btn { padding:5px 12px; border-radius:20px; border:1px solid #d6d3d1; cursor:pointer; font-size:12px; font-family:inherit; background:#fff; color:#78716c; }
  .filter-btn.active { background:#1c1917; color:#fff; border-color:#1c1917; font-weight:700; }

  /* ------------------------------
     æ³¨æ–‡ãƒ•ã‚©ãƒ¼ãƒ 
  ------------------------------ */
  .form-card { background:#fff; border-radius:12px; border:1px solid #e7e5e4; padding:16px; margin-bottom:14px; }
  .form-title { font-weight:700; font-size:15px; margin-bottom:14px; }
  .form-grid { display:grid; grid-template-columns:1fr 1fr; gap:10px; }
  .form-group label { font-size:12px; color:#78716c; display:block; margin-bottom:4px; }
  .form-group input, .form-group textarea { width:100%; padding:9px 12px; border:1px solid #d6d3d1; border-radius:6px; font-size:14px; font-family:inherit; outline:none; -webkit-appearance:none; }
  .form-group input:focus, .form-group textarea:focus { border-color:#f59e0b; }
  .form-actions { display:flex; gap:8px; margin-top:14px; flex-wrap:wrap; }

  /* ------------------------------
     æ³¨æ–‡ãƒªã‚¹ãƒˆ
  ------------------------------ */
  .order-list { display:flex; flex-direction:column; gap:8px; }
  .order-card { background:#fff; border-radius:12px; border:1px solid #e7e5e4; padding:14px 16px; border-left:4px solid; display:flex; flex-direction:column; }
  .order-top { display:flex; align-items:flex-start; justify-content:space-between; gap:8px; flex-wrap:wrap; }
  .order-info { flex:1; min-width:180px; }
  .order-name { font-weight:700; font-size:16px; margin-bottom:4px; }
  .order-model { font-size:12px; color:#78716c; background:#f5f5f4; padding:2px 8px; border-radius:4px; display:inline-block; margin-left:6px; }
  .badge { font-size:12px; padding:3px 10px; border-radius:20px; font-weight:600; display:inline-block; margin-top:4px; }
  .order-meta { margin-top:6px; font-size:13px; color:#57534e; display:flex; gap:12px; flex-wrap:wrap; }
  .order-memo { margin-top:6px; font-size:13px; color:#78716c; background:#fafaf9; padding:4px 10px; border-radius:4px; }
  .order-time { font-size:11px; color:#a8a29e; margin-top:4px; }
  .order-actions { display:flex; flex-direction:column; gap:6px; align-items:flex-end; flex-shrink:0; min-width:90px; }

  /* ------------------------------
     ç©ºçŠ¶æ…‹ / ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°
  ------------------------------ */
  .empty { text-align:center; padding:60px 20px; color:#a8a29e; background:#fff; border-radius:12px; border:1px solid #e7e5e4; }
  .empty-icon { font-size:40px; margin-bottom:8px; }
  .loading { text-align:center; padding:60px 20px; color:#a8a29e; }
  .spinner { width:32px; height:32px; border:3px solid #e7e5e4; border-top-color:#f59e0b; border-radius:50%; animation:spin 0.8s linear infinite; margin:0 auto 12px; }
  @keyframes spin { to { transform: rotate(360deg); } }

  /* ------------------------------
     ãƒ¢ãƒ¼ãƒ€ãƒ«
  ------------------------------ */
  .modal-overlay { position:fixed; inset:0; background:rgba(0,0,0,0.5); display:flex; align-items:flex-end; justify-content:center; z-index:100; }
  .modal-overlay.center { align-items:center; padding:16px; }
  .modal { background:#fff; border-radius:16px 16px 0 0; width:100%; max-height:85vh; overflow-y:auto; padding:20px; }
  .modal.center { border-radius:16px; max-width:540px; }
  .modal-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:16px; }
  .modal-title { font-weight:700; font-size:17px; }
  .modal-close { background:none; border:none; font-size:22px; cursor:pointer; color:#78716c; padding:0 4px; }

  .week-select { width:100%; padding:9px 12px; border:1px solid #d6d3d1; border-radius:6px; font-size:14px; font-family:inherit; margin-bottom:14px; }
  .weekly-preview { background:#fafaf9; border-radius:8px; padding:14px; font-family:monospace; font-size:12px; white-space:pre-wrap; margin-bottom:14px; border:1px solid #e7e5e4; line-height:1.8; max-height:40vh; overflow-y:auto; }
  .modal-actions { display:flex; gap:10px; flex-wrap:wrap; }
  .modal-actions .btn { flex:1; text-align:center; }

  /* ------------------------------
     ãƒˆãƒ¼ã‚¹ãƒˆ
  ------------------------------ */
  .toast { position:fixed; bottom:24px; left:50%; transform:translateX(-50%); background:#1c1917; color:#fff; padding:10px 20px; border-radius:20px; font-size:13px; font-weight:600; z-index:200; opacity:0; transition:opacity 0.3s; pointer-events:none; white-space:nowrap; }
  .toast.show { opacity:1; }
</style>
</head>
<body>

<div class="header">
  <div class="header-title"><div class="dot"></div>DJANGOæ³¨æ–‡ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </div>
  <div class="mode-switcher">
    <button class="mode-btn active" id="btn-store">åº—èˆ—ãƒ¢ãƒ¼ãƒ‰</button>
    <button class="mode-btn inactive" id="btn-wholesaler">å•å±‹ãƒ¢ãƒ¼ãƒ‰</button>
  </div>
</div>

<div class="main">
  <div class="stats">
    <div class="stat-card"><div class="stat-label">å…¨æ³¨æ–‡</div><div class="stat-value" id="stat-total">-</div></div>
    <div class="stat-card"><div class="stat-label">æœªç¢ºèª</div><div class="stat-value" id="stat-pending" style="color:#f59e0b">-</div></div>
    <div class="stat-card"><div class="stat-label">æŠ¼ã•ãˆæ¸ˆã¿</div><div class="stat-value" id="stat-reserved" style="color:#10b981">-</div></div>
  </div>

  <div class="action-bar">
    <button class="btn btn-primary" id="add-btn">ï¼‹ æ³¨æ–‡ã‚’è¿½åŠ </button>
    <button class="btn btn-secondary" id="weekly-btn">ğŸ“‹ 2é€±é–“ãƒªã‚¹ãƒˆ</button>
    <div class="sync-status" id="sync-status"><div class="sync-dot"></div>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸä¸­</div>
  </div>

  <div class="filters">
    <button class="filter-btn active" data-status="all">ã™ã¹ã¦</button>
    <button class="filter-btn" data-status="pending">æœªç¢ºèª</button>
    <button class="filter-btn" data-status="reserved">æŠ¼ã•ãˆæ¸ˆã¿</button>
    <button class="filter-btn" data-status="ordered">æ³¨æ–‡æ¸ˆã¿</button>
  </div>

  <div class="form-card" id="order-form" style="display:none">
    <div class="form-title">æ–°è¦æ³¨æ–‡ç™»éŒ²</div>
    <div class="form-grid">
      <div class="form-group">
        <label>å•†å“å ï¼Š</label>
        <input type="text" id="f-product" placeholder="ä¾‹ï¼šãƒ‡ãƒªã‚¢å·¦ã‚«ã‚¦ãƒ">
      </div>
      <div class="form-group">
        <label>ã‚«ãƒ©ãƒ¼</label>
        <input type="text" id="f-model" placeholder="ä¾‹ï¼šCAMã‚„CACAOç­‰">
      </div>
      <div class="form-group">
        <label>æ•°é‡ ï¼Š</label>
        <input type="number" id="f-qty" placeholder="ä¾‹ï¼š2" min="1">
      </div>
      <div class="form-group">
        <label>ãŠå®¢æ§˜ç•ªå· ï¼Š</label>
        <input type="number" id="f-customer" placeholder="ä¾‹ï¼š358" min="1">
      </div>
      <div class="form-group" style="grid-column: span 2">
        <label>å‚™è€ƒ</label>
        <input type="text" id="f-memo" placeholder="ç´æœŸæŒ‡å®šãªã©">
      </div>
    </div>
    <div class="form-actions">
      <button class="btn btn-dark" id="submit-btn">ç™»éŒ²ã™ã‚‹</button>
      <button class="btn btn-secondary" id="cancel-btn">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
    </div>
  </div>

  <div id="order-list">
    <div class="loading"><div class="spinner"></div>æ¥ç¶šä¸­...</div>
  </div>
</div>

<div class="modal-overlay center" id="weekly-modal" style="display:none">
  <div class="modal center">
    <div class="modal-header">
      <div class="modal-title">ğŸ“‹ 2é€±é–“æ³¨æ–‡ãƒªã‚¹ãƒˆ</div>
      <button class="modal-close" id="weekly-close">âœ•</button>
    </div>
    <label style="font-size:12px;color:#78716c;display:block;margin-bottom:6px">å¯¾è±¡æœŸé–“ã‚’é¸æŠ</label>
    <select class="week-select" id="week-select"></select>
    <div class="weekly-preview" id="weekly-preview">æœŸé–“ã‚’é¸æŠã—ã¦ãã ã•ã„</div>
    <div class="modal-actions">
      <button class="btn btn-dark" id="copy-btn">ğŸ“‹ ãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚³ãƒ”ãƒ¼</button>
      <button class="btn btn-secondary" id="print-btn">ğŸ–¨ï¸ å°åˆ·</button>
    </div>
  </div>
</div>

<div class="toast" id="toast"></div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getDatabase, ref, onValue, push, update, remove } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

const DJANGOOrders = (() => {
  // ------------------------------
  // FirebaseåˆæœŸåŒ–
  // ------------------------------
  const firebaseConfig = {
    apiKey: "AIzaSyDx6oJnre3L1UWcYzeKFzPjaLo5_E5qZLc",
    authDomain: "django-interior.firebaseapp.com",
    databaseURL: "https://django-interior-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "django-interior",
    storageBucket: "django-interior.firebasestorage.app",
    messagingSenderId: "600675642337",
    appId: "1:600675642337:web:2e420e6553093600f200a0"
  };
  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);
  const ordersRef = ref(db, 'orders');

  // ------------------------------
  // å®šæ•°ãƒ»çŠ¶æ…‹
  // ------------------------------
  const STATUS = {
    pending:  { label:'æœªç¢ºèª', color:'#f59e0b', bg:'#fef3c7' },
    reserved: { label:'æŠ¼ã•ãˆæ¸ˆã¿', color:'#10b981', bg:'#d1fae5' },
    ordered:  { label:'æ³¨æ–‡æ¸ˆã¿', color:'#6366f1', bg:'#e0e7ff' }
  };
  const PERIOD_BASE = (() => {
